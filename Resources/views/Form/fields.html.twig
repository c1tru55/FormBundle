{% extends ite_parent_form_resource(_self.templateName) %}

{% block ite_select2_widget %}
    {{ block('choice_widget') }}
{% endblock ite_select2_widget %}

{% block ite_select2_ajax_choice_widget %}
    {{ block('choice_widget') }}
{% endblock ite_select2_ajax_choice_widget %}

{% block ite_select2_ajax_entity_widget %}
    {{ block('choice_widget') }}
{% endblock ite_select2_ajax_entity_widget %}

{% block ite_tinymce_textarea_widget %}
    {{ block('textarea_widget') }}
{% endblock ite_tinymce_textarea_widget %}

{% block ite_bootstrap_colorpicker_text_widget %}
    {{ block('form_widget_simple') }}
{% endblock ite_bootstrap_colorpicker_text_widget %}

{% block ite_bootstrap_spinedit_number_widget %}
    {{ block('number_widget') }}
{% endblock ite_bootstrap_spinedit_number_widget %}

{% block ite_bootstrap_spinedit_integer_widget %}
    {{ block('integer_widget') }}
{% endblock ite_bootstrap_spinedit_integer_widget %}

{% block ite_bootstrap_datetimepicker_widget %}
    {{ block('form_widget_simple') }}
{% endblock ite_bootstrap_datetimepicker_widget %}

{% block ite_minicolors_text_widget %}
    {{ block('form_widget_simple') }}
{% endblock ite_minicolors_text_widget %}

{% block ite_knob_number_widget %}
    {{ block('form_widget_simple') }}
{% endblock ite_knob_number_widget %}

{% block ite_starrating_rating_widget %}
    <div {{ block('widget_container_attributes') }}>
        {% for child in form %}
            {{ form_widget(child, {'attr': {
                'class': attr.widget_class|default(''),
                'title': child.vars.label|trans({}, translation_domain)
            } }) }}
        {% endfor %}
    </div>
{% endblock ite_starrating_rating_widget %}

{% block ite_ion_range_slider_widget %}
    {{ block('form_widget_simple') }}
{% endblock ite_ion_range_slider_widget %}

{% block ite_bootstrap_daterangepicker_widget %}
    {{ block('form_widget_simple') }}
{% endblock ite_bootstrap_daterangepicker_widget %}

{%- block simple_widget_attributes -%}
    id="{{ id }}"
    {%- for attrname, attrvalue in attr -%}
        {{- " " -}}
        {%- if attrname in ['placeholder', 'title'] -%}
            {{- attrname }}="{{ attrvalue|trans({}, translation_domain) }}"
        {%- elseif attrvalue is sameas(true) -%}
            {{- attrname }}="{{ attrname }}"
        {%- elseif attrvalue is not sameas(false) -%}
            {{- attrname }}="{{ attrvalue }}"
        {%- endif -%}
    {%- endfor -%}
{%- endblock simple_widget_attributes -%}

{% block ite_markup_widget %}
    {% set attr = attr|merge({'class': (attr.class|default('') ~ ' form-control-static')|trim}) %}
    <p {{ block('simple_widget_attributes') }}>{{ markup|trans({}, translation_domain)|raw }}</p>
{% endblock ite_markup_widget %}

{% block ite_hidden_markup_widget %}
    {% set attr_copy = attr %}
    {% set attr = markup_attr %}
    {{ block('ite_markup_widget') }}
    {% set attr = attr_copy %}
    {{ block('hidden_widget') }}
{% endblock ite_hidden_markup_widget %}

{# refactor below #}

{#{% block ite_fileupload_file_widget %}#}
    {#{% set selector = id %}#}
    {#{% if widget == 'basic' %}#}
        {#<span class="btn btn-success fileinput-button">#}
        {#<i class="icon-plus"></i>#}
            {#Add files...#}
            {#{{ block('form_widget_simple') }}#}
        {#</span>#}
    {#{% elseif widget == 'basic_plus' %}#}

    {#{% else %}#}
        {#<div id="{{ id }}_container" data-property-path="{{ full_name }}">#}
            {#<div class="row-fluid fileupload-buttonbar">#}
                {#<div class="span7">#}
                {#<span class="btn btn-success fileinput-button">#}
                    {#<i class="icon-plus"></i>#}
                    {#Add files...#}
                    {#{{ block('form_widget_simple') }}#}
                {#</span>#}
                    {#<button type="submit" class="btn btn-primary start">#}
                        {#<i class="icon-upload"></i>#}
                        {#Start upload#}
                    {#</button>#}
                    {#<button type="reset" class="btn btn-warning cancel">#}
                        {#<i class="icon-ban-circle"></i>#}
                        {#Cancel upload#}
                    {#</button>#}
                    {#<button type="button" class="btn btn-danger delete">#}
                        {#<i class="icon-trash"></i>#}
                        {#Delete#}
                    {#</button>#}
                    {#<input type="checkbox" class="toggle">#}
                    {#<span class="fileupload-process"></span>#}
                {#</div>#}
                {#<div class="span5 fileupload-progress fade">#}
                    {#<div class="progress progress-striped active" role="progressbar" aria-valuemin="0" aria-valuemax="100">#}
                        {#<div class="progress-bar progress-bar-success" style="width:0%;"></div>#}
                    {#</div>#}
                    {#<div class="progress-extended">&nbsp;</div>#}
                {#</div>#}
            {#</div>#}
            {#<table role="presentation" class="table table-striped">#}
                {#<tbody class="files"></tbody>#}
            {#</table>#}
        {#</div>#}
        {#{% set selector = id ~ '_container' %}#}
    {#{% endif %}#}
    {#{% for plugin, element_data in plugins %}#}
        {#{{ ite_form_sf_add_plugin_element('#' ~ selector, plugin, element_data) }}#}
    {#{% endfor %}#}
{#{% endblock ite_fileupload_file_widget %}#}

{#{% block ite_fineuploader_file_widget %}#}
    {#<div id="{{ id }}_fine_uploader" data-property-path="{{ full_name }}"></div>#}
    {#{{ block('form_widget_simple') }}#}
    {#{% for plugin, element_data in plugins %}#}
        {#{{ ite_form_sf_add_plugin_element('#' ~ id ~ '_fine_uploader', plugin, element_data) }}#}
    {#{% endfor %}#}
{#{% endblock ite_fineuploader_file_widget %}#}

{% block ite_input_entity_widget %}
    {% if widget == 'hidden' %}
        {{ block('hidden_widget') }}
    {% else %}
        {{ block('form_widget_simple') }}
    {% endif %}
{% endblock ite_input_entity_widget %}